!function(){function e(){for(var e,t=[],n=0;n<y.length;n++)"block"===y[n].style.display&&(e=y[n],t.push(n));f(e),a();for(var n=0;n<t.length;n++)y.splice(t[n]-n,1);y.length||g("modal:open",a)}function t(e,t){for(var n=0;n<e.length;n++)t(e[n])}function n(e,t){t=t||100;var n=e.getBoundingClientRect();return null!==e.offsetParent&&n.bottom>=0&&n.right>=0&&n.top-t<=(window.innerHeight||document.documentElement.clientHeight)&&n.left-t<=(window.innerWidth||document.documentElement.clientWidth)}function l(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function a(){!1===m&&(m=!0,p.length&&r(),v.length&&c(),b.length&&o(),p.length||v.length||b.length||(g("resize",a),g("scroll",a,null,!0)),m=!1)}function r(){for(var e=[],t=0;t<p.length;t++)n(p[t].el,500)&&(i(p[t].el,p[t].attr),e.push(t));for(var t=0;t<e.length;t++)p.splice(e[t]-t,1)}function c(){for(var e=[],t=0;t<v.length;t++)n(v[t].el)&&(s(v[t].el,v[t].attr),e.push(t));for(var t=0;t<e.length;t++)v.splice(e[t]-t,1)}function o(){for(var e=[],t=0;t<b.length;t++)n(b[t].el)&&(d(b[t].el),e.push(t));for(var t=0;t<e.length;t++)b.splice(e[t]-t,1)}function i(e){var t=document.createElement("div");t.innerHTML=e.getAttribute("data-html").trim();for(var n=t.children.length-1;n>-1;n--){var l=t.children[n];if(!l)break;if("IFRAME"===l.tagName)l.onload=function(){e.removeChild(e.children[0])},e.appendChild(l);else if("SCRIPT"===l.tagName){var a=document.createElement("script");a.innerHTML=l.innerHTML,a.async=l.async,l.src&&(a.src=l.src),l.type&&(a.type=l.type),e.appendChild(a)}else{var r=e.querySelector(".embed-loader");r.parentNode.removeChild(r),e.appendChild(l)}}e.removeAttribute("data-html"),e.classList.remove("lazy-embed")}function s(e,t){if(e.classList&&!e.classList.contains("loaded")){var n=new Image,l=e.getAttribute(t);n.onload=function(){L[t](e,l),e.classList.add("loaded")},n.onerror=function(){e.classList.remove("img-loader"),e.classList.add("load-error")},e.classList.add("img-loader"),n.src=l,e.removeAttribute(t)}}function d(e){if(e.getAttribute("data-async-poster")&&e.setAttribute("poster",e.getAttribute("data-async-poster")),e.classList&&!e.classList.contains("loaded")){for(var t=0;t<e.children.length;t++){var n=e.children[t];"string"==typeof n.tagName&&"SOURCE"===n.tagName&&(n.src=n.getAttribute("data-async-src"),n.removeAttribute("data-async-src"))}e.load(),e.classList.add("loaded"),setTimeout(function(){e.canPlayType&&!e.paused||e.setAttribute("poster",e.getAttribute("data-fallback-src"))},50)}}function u(e){(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?e():document.addEventListener("DOMContentLoaded",e)}function h(e,t,n,l){n=n||window,n.addEventListener?n.addEventListener(e,t,!!l):n.attachEvent("on"+e,t)}function g(e,t,n,l){n=n||window,n.removeEventListener(e,t,!!l)}function f(e){e=e||document,t([].slice.call(e.querySelectorAll("[data-async-bg]")),function(e){l(e)&&v.push({attr:"data-async-bg",el:e})}),t([].slice.call(e.querySelectorAll("img[data-async-src]")),function(e){l(e)&&v.push({attr:"data-async-src",el:e})}),t([].slice.call(e.querySelectorAll("video.async-video")),function(e){l(e)&&b.push({el:e})}),t([].slice.call(e.querySelectorAll(".lazy-embed")),function(e){l(e)&&p.push({el:e})})}var m=!1,p=[],v=[],y=[],b=[];u(function(){f(),(p.length||v.length||b.length)&&a(),(p.length||v.length||b.length)&&(h("resize",a),h("scroll",a,null,!0)),y=[].slice.call(document.querySelectorAll(".modal-popup")),y.length&&h("modal:open",e)});var L={"data-async-bg":function(e,t){e.style.backgroundImage='url("'+t+'")'},"data-async-src":function(e,t){e.src=t}}}();